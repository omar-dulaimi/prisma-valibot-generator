# Repository Guidelines

## Project Structure & Module Organization
- `src/` TypeScript sources (edit here). Entry: `src/index.ts`; CLI shim: `src/generator.ts`.
- `lib/` Build output (generated by `tsc`). Do not edit.
- `tests/` Vitest suites and helpers.
- `prisma/` Example schema, test DB, and generated outputs during dev.
- `scripts/` release utilities.

## Build, Test, and Development Commands
- Build: `npm run build` (compiles TS → `lib/`).
- Generate example: `npm run gen-example` (builds and runs `npx prisma generate`).
- Tests: `npm test` (vitest), watch: `npm run test:watch`, types-only: `npm run test:type-check`.
- Lint/format: `npm run lint` and `npm run format`.
- Release (CI uses semantic‑release): local dry run `npm run release:dry`.

Example local Prisma config while developing:
```prisma
generator valibot {
  provider = "node ./lib/generator.js"
  output   = "./prisma/generated"
}
```

## Coding Style & Naming Conventions
- Language: TypeScript, strict mode; 2‑space indent.
- Files: `kebab-case.ts`; types/interfaces: `PascalCase`; variables/functions: `camelCase`.
- Use ESLint (`eslint.config.mjs`) with `@typescript-eslint`; Prettier for formatting.
- No console noise in library code—use `src/utils/logger.ts` (`DEBUG_PRISMA_VALIBOT=1`).

## Testing Guidelines
- Framework: Vitest. Test files in `tests/**/*.{test,spec}.ts`.
- Prefer small, isolated fixtures (see `tests/helpers/`).
- Add tests for new behavior and edge cases; type checks must pass (`npm run test:type-check`).
- Coverage is configured; no strict threshold—aim to cover new/changed code.

## Commit & Pull Request Guidelines
- Commits: Conventional Commits (e.g., `feat:`, `fix:`, `chore:`, `docs:`, `test:`). Used by semantic‑release.
- PRs must include: clear description, linked issues (`Closes #123`), tests, and doc/README updates when applicable. Include screenshots for docs changes.
- Keep diffs focused; do not commit `lib/` or generated artifacts.

## Security & Configuration Tips
- Node 18+ required. Copy `.env.example` if needed for local DB.
- Prisma writes to the configured `output`; avoid committing large generated sets.
